var s=Object.defineProperty;var a=(e,n)=>s(e,"name",{value:n,configurable:!0});import{FLAB as r}from"./state.js";function y(e){if(e.key==="Escape"){import("./ui.js").then(({hideHelp:n})=>{n()}),(r.drag||r.passArm)&&(r.drag=null,r.passArm=null,import("./render.js").then(({renderArrows:n})=>{n()}));return}if((e.key==="z"||e.key==="Z")&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){e.preventDefault(),import("./pass.js").then(({clearLastPass:n,renderArrows:t})=>{if((r.arrows||[]).length===0){import("./ui-toast.js").then(({showToast:o})=>{o("No passes to undo")});return}n(),t(),import("./ui-toast.js").then(({showToast:o})=>{o("\u26A0\uFE0F Undid last pass (cannot be undone with Redo)","warning")})});return}if(e.key==="Tab"&&!e.ctrlKey&&!e.altKey&&!e.metaKey){e.preventDefault();const n=r.players.map(i=>i.id).sort((i,l)=>i-l);if(n.length===0)return;const t=n.indexOf(r.selectedId),o=e.shiftKey?t<=0?n.length-1:t-1:t>=n.length-1?0:t+1;r.selectedId=n[o],import("./render.js").then(({updateHalo:i})=>{i()}),document.querySelector(`.flab-player[data-id="${r.selectedId}"]`)?.focus();return}if(r.selectedId&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){e.preventDefault();const n=r.players.find(o=>o.id===r.selectedId);if(!n)return;const t=e.shiftKey?.1:.01;e.key==="ArrowUp"&&(n.ny-=t),e.key==="ArrowDown"&&(n.ny+=t),e.key==="ArrowLeft"&&(n.nx-=t),e.key==="ArrowRight"&&(n.nx+=t),n.nx=Math.min(1,Math.max(0,n.nx)),n.ny=Math.min(1,Math.max(0,n.ny)),import("./render.js").then(({renderPlayers:o,updateHalo:d,renderArrows:i})=>{o(),d(),i()})}}a(y,"handleGlobalKeydown");function c(){document.addEventListener("keydown",y),console.log("\u2328\uFE0F Keyboard navigation initialized")}a(c,"initKeyboard"),window.__mod_keyboard=!0;export{c as initKeyboard};
//# sourceMappingURL=keyboard.js.map
