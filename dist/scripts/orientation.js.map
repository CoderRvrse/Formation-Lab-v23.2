{
  "version": 3,
  "sources": ["../../scripts/orientation.js"],
  "sourcesContent": ["// Orientation module for Formation Lab\r\nimport { set, FLAB, PITCH_LAND, PITCH_PORT } from './state.js';\r\n\r\n/**\r\n * Detect if we're on a mobile device vs desktop\r\n * Mobile devices should auto-rotate, desktop should stay landscape\r\n */\r\nfunction isMobileDevice() {\r\n  // Check for touch support AND small screen\r\n  const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n  const isSmallScreen = window.screen.width <= 1024 || window.screen.height <= 1024;\r\n\r\n  // Also check user agent for mobile patterns\r\n  const mobilePattern = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\r\n  const isMobileUA = mobilePattern.test(navigator.userAgent);\r\n\r\n  return (hasTouch && isSmallScreen) || isMobileUA;\r\n}\r\n\r\nexport function setOrientation(mode) {\r\n  set('orientation', mode);\r\n  const fieldEl = document.querySelector('.flab-field');\r\n  fieldEl?.classList.toggle('is-portrait', mode === 'portrait');\r\n  // swap pitch asset via CSS var (use relative path from CSS context)\r\n  const pitchPath = mode === 'portrait' ? '../../assets/portrait/pitch-portrait.svg' : '../../assets/landscape/pitch-landscape.svg';\r\n  document.documentElement.style.setProperty('--pitch-url',\r\n    `url(\"${pitchPath}\")`\r\n  );\r\n\r\n  // Import render functions when needed\r\n  import('./render.js').then(({ relayoutAllPlayers, renderArrows }) => {\r\n    relayoutAllPlayers();\r\n    renderArrows?.();\r\n  });\r\n}\r\n\r\nexport function flipSides(){\r\n  for (const p of FLAB.players) p.nx = 1 - p.nx;\r\n\r\n  // Import render functions when needed\r\n  import('./render.js').then(({ relayoutAllPlayers, renderArrows }) => {\r\n    relayoutAllPlayers();\r\n    renderArrows?.();\r\n  });\r\n}\r\n\r\nexport function autoOrientation() {\r\n  const field = document.querySelector('.flab-field');\r\n  const r = field?.clientWidth / Math.max(1, field?.clientHeight || 1);\r\n\r\n  // On desktop in fullscreen mode, always use landscape regardless of monitor orientation\r\n  // This prevents incorrect rotation when dragging to portrait monitors\r\n  const isFullscreen = document.body.classList.contains('flab-body--fullscreen');\r\n  if (!isMobileDevice() && isFullscreen) {\r\n    setOrientation('landscape');\r\n    return;\r\n  }\r\n\r\n  // Otherwise, auto-detect based on viewport aspect ratio\r\n  setOrientation(r >= 1 ? 'landscape' : 'portrait');\r\n}\r\n\r\nwindow.__mod_orientation = true;"],
  "mappings": "+EACA,OAAS,OAAAA,EAAK,QAAAC,MAAoC,aAMlD,SAASC,GAAiB,CAExB,MAAMC,EAAW,iBAAkB,QAAU,UAAU,eAAiB,EAClEC,EAAgB,OAAO,OAAO,OAAS,MAAQ,OAAO,OAAO,QAAU,KAIvEC,EADgB,iEACW,KAAK,UAAU,SAAS,EAEzD,OAAQF,GAAYC,GAAkBC,CACxC,CAVSC,EAAAJ,EAAA,kBAYF,SAASK,EAAeC,EAAM,CACnCR,EAAI,cAAeQ,CAAI,EACP,SAAS,cAAc,aAAa,GAC3C,UAAU,OAAO,cAAeA,IAAS,UAAU,EAE5D,MAAMC,EAAYD,IAAS,WAAa,2CAA6C,6CACrF,SAAS,gBAAgB,MAAM,YAAY,cACzC,QAAQC,CAAS,IACnB,EAGA,OAAO,aAAa,EAAE,KAAK,CAAC,CAAE,mBAAAC,EAAoB,aAAAC,CAAa,IAAM,CACnED,EAAmB,EACnBC,IAAe,CACjB,CAAC,CACH,CAfgBL,EAAAC,EAAA,kBAiBT,SAASK,GAAW,CACzB,UAAWC,KAAKZ,EAAK,QAASY,EAAE,GAAK,EAAIA,EAAE,GAG3C,OAAO,aAAa,EAAE,KAAK,CAAC,CAAE,mBAAAH,EAAoB,aAAAC,CAAa,IAAM,CACnED,EAAmB,EACnBC,IAAe,CACjB,CAAC,CACH,CARgBL,EAAAM,EAAA,aAUT,SAASE,GAAkB,CAChC,MAAMC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAID,GAAO,YAAc,KAAK,IAAI,EAAGA,GAAO,cAAgB,CAAC,EAI7DE,EAAe,SAAS,KAAK,UAAU,SAAS,uBAAuB,EAC7E,GAAI,CAACf,EAAe,GAAKe,EAAc,CACrCV,EAAe,WAAW,EAC1B,MACF,CAGAA,EAAeS,GAAK,EAAI,YAAc,UAAU,CAClD,CAdgBV,EAAAQ,EAAA,mBAgBhB,OAAO,kBAAoB",
  "names": ["set", "FLAB", "isMobileDevice", "hasTouch", "isSmallScreen", "isMobileUA", "__name", "setOrientation", "mode", "pitchPath", "relayoutAllPlayers", "renderArrows", "flipSides", "p", "autoOrientation", "field", "r", "isFullscreen"]
}
