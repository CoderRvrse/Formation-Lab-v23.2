{
  "version": 3,
  "sources": ["../../scripts/main.js"],
  "sourcesContent": ["// Bootstrap module for Formation Lab v23.4\nimport './version.js';\nimport { FLAB, PITCH_LAND, PITCH_PORT, PASS_STYLES } from './state.js';\nimport { preloadArrowAssets } from './assets.arrows.js';\nimport { ensureHalo, relayoutAllPlayers } from './render.js';\nimport { initDrag } from './drag.js';\nimport { initPassTool } from './pass.js';\nimport { setOrientation } from './orientation.js';\nimport { wireUI } from './ui.js';\nimport { initKeyboard } from './keyboard.js';\nimport { loadSettings } from './persist.js';\nimport { runAudit } from './audit.js';\nimport { applyPreset } from './presets.js';\nimport { wirePresetDropdown } from './ui.presets.menu.js';\nimport { wireEraseMenu } from './ui.erase.menu.js';\nimport { wirePassStyleMenu } from './ui.passstyle.menu.js';\nimport { initPassLayer } from './pass.init.js';\nimport { initErrorHandler } from './error-handler.js';\nimport { initToastSystem } from './ui-toast.js';\nimport { initSpinnerSystem } from './loading-spinner.js';\nimport { initTouchGestures } from './touch-gestures.js';\nimport { initBottomSheetSystem } from './bottom-sheet.js';\nimport { initAccessibility, addLandmarks, addAriaLabels, addSkipLink, enableKeyboardNavigation } from './accessibility.js';\nimport { initUndoRedo, saveUndoState } from './undo-redo.js';\nimport { initTheme } from './theme.js';\nimport { initShare } from './share.js';\nimport './performance.js'; // Performance monitoring (auto-init in dev)\n\nconsole.log(`\uD83D\uDE80 Formation Lab ${FLAB.version} starting...`);\n\n// Initialize error handling, toast notifications, loading spinners, bottom sheets, accessibility, and theme\ninitErrorHandler();\ninitToastSystem();\ninitSpinnerSystem();\ninitBottomSheetSystem();\ninitAccessibility();\ninitTheme(); // Initialize theme early to prevent flash\n\n// Preload pitch assets to eliminate 404s\nconst preloadImg1 = new Image();\nconst preloadImg2 = new Image();\npreloadImg1.src = PITCH_LAND;\npreloadImg2.src = PITCH_PORT;\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  console.log('\uD83D\uDCC4 DOM loaded, initializing modules...');\n\n  // Preload arrow assets for markers and export parity\n  await preloadArrowAssets(PASS_STYLES);\n\n  // Preload arrow head symbols for transform-based heads\n  const { preloadArrowHeads } = await import('./assets.arrows.js');\n  await preloadArrowHeads();\n\n  // Load user settings first\n  loadSettings();\n\n  // Initialize default formation if no players exist\n  if (!FLAB.players || FLAB.players.length === 0) {\n    applyPreset('4-3-3');\n  }\n\n  // Initialize core components\n  ensureHalo();\n  setOrientation(FLAB.orientation || 'landscape');\n  relayoutAllPlayers();\n\n  // Initialize interaction systems\n  initDrag();\n  initPassTool();\n  initKeyboard();\n  initTouchGestures(); // Mobile touch gestures (pinch-zoom, long-press)\n\n  // Initialize pass layer (for audit)\n  initPassLayer();\n\n  // Wire up UI\n  wireUI();\n  wirePresetDropdown();\n  wireEraseMenu();\n  wirePassStyleMenu();\n\n  // Initialize accessibility features (ARIA landmarks, labels, skip link, keyboard nav)\n  addSkipLink();\n  addLandmarks();\n  addAriaLabels();\n  enableKeyboardNavigation();\n\n  // Initialize undo/redo system\n  initUndoRedo();\n\n  // Save initial state for undo/redo\n  saveUndoState('Initial formation');\n\n  // Initialize share system\n  initShare();\n\n  // Initialize ball animation system\n  import('./animate.js').then(({ ensureBallLayer, preloadBall }) => {\n    ensureBallLayer(document.getElementById('arrow-layer'));\n    preloadBall();\n  });\n\n  // Ensure proper layer ordering for ball visibility\n  import('./render.js').then(({ ensureLayerOrder }) => {\n    ensureLayerOrder();\n  });\n\n  // Assert overlay alignment at boot\n  (() => {\n    const field = document.querySelector('.flab-field');\n    const overlay = document.getElementById('arrow-layer');\n    const ok = overlay?.parentElement === field &&\n               getComputedStyle(field).position === 'relative' &&\n               getComputedStyle(overlay).position === 'absolute';\n    if (!ok) console.error('Arrow overlay misaligned: place #arrow-layer inside .flab-field with position:absolute;inset:0');\n  })();\n\n  console.log(`\u2705 Formation Lab ${FLAB.version} ready!`);\n\n  // Run audit on localhost/dev only\n  if (location.hostname === '127.0.0.1' || location.hostname === 'localhost') {\n    setTimeout(() => runAudit(), 500); // Allow modules to fully initialize\n  }\n});"],
  "mappings": "AACA,MAAO,eACP,OAAS,QAAAA,EAAM,cAAAC,EAAY,cAAAC,EAAY,eAAAC,MAAmB,aAC1D,OAAS,sBAAAC,MAA0B,qBACnC,OAAS,cAAAC,EAAY,sBAAAC,MAA0B,cAC/C,OAAS,YAAAC,MAAgB,YACzB,OAAS,gBAAAC,MAAoB,YAC7B,OAAS,kBAAAC,MAAsB,mBAC/B,OAAS,UAAAC,MAAc,UACvB,OAAS,gBAAAC,MAAoB,gBAC7B,OAAS,gBAAAC,MAAoB,eAC7B,OAAS,YAAAC,MAAgB,aACzB,OAAS,eAAAC,MAAmB,eAC5B,OAAS,sBAAAC,MAA0B,uBACnC,OAAS,iBAAAC,MAAqB,qBAC9B,OAAS,qBAAAC,MAAyB,yBAClC,OAAS,iBAAAC,MAAqB,iBAC9B,OAAS,oBAAAC,MAAwB,qBACjC,OAAS,mBAAAC,MAAuB,gBAChC,OAAS,qBAAAC,MAAyB,uBAClC,OAAS,qBAAAC,MAAyB,sBAClC,OAAS,yBAAAC,MAA6B,oBACtC,OAAS,qBAAAC,EAAmB,gBAAAC,EAAc,iBAAAC,EAAe,eAAAC,EAAa,4BAAAC,MAAgC,qBACtG,OAAS,gBAAAC,EAAc,iBAAAC,MAAqB,iBAC5C,OAAS,aAAAC,MAAiB,aAC1B,OAAS,aAAAC,MAAiB,aAC1B,MAAO,mBAEP,QAAQ,IAAI,2BAAoBhC,EAAK,OAAO,cAAc,EAG1DmB,EAAiB,EACjBC,EAAgB,EAChBC,EAAkB,EAClBE,EAAsB,EACtBC,EAAkB,EAClBO,EAAU,EAGV,MAAME,EAAc,IAAI,MAClBC,EAAc,IAAI,MACxBD,EAAY,IAAMhC,EAClBiC,EAAY,IAAMhC,EAElB,OAAO,iBAAiB,mBAAoB,SAAY,CACtD,QAAQ,IAAI,+CAAwC,EAGpD,MAAME,EAAmBD,CAAW,EAGpC,KAAM,CAAE,kBAAAgC,CAAkB,EAAI,KAAM,QAAO,oBAAoB,EAC/D,MAAMA,EAAkB,EAGxBvB,EAAa,GAGT,CAACZ,EAAK,SAAWA,EAAK,QAAQ,SAAW,IAC3Cc,EAAY,OAAO,EAIrBT,EAAW,EACXI,EAAeT,EAAK,aAAe,WAAW,EAC9CM,EAAmB,EAGnBC,EAAS,EACTC,EAAa,EACbG,EAAa,EACbW,EAAkB,EAGlBJ,EAAc,EAGdR,EAAO,EACPK,EAAmB,EACnBC,EAAc,EACdC,EAAkB,EAGlBU,EAAY,EACZF,EAAa,EACbC,EAAc,EACdE,EAAyB,EAGzBC,EAAa,EAGbC,EAAc,mBAAmB,EAGjCE,EAAU,EAGV,OAAO,cAAc,EAAE,KAAK,CAAC,CAAE,gBAAAI,EAAiB,YAAAC,CAAY,IAAM,CAChED,EAAgB,SAAS,eAAe,aAAa,CAAC,EACtDC,EAAY,CACd,CAAC,EAGD,OAAO,aAAa,EAAE,KAAK,CAAC,CAAE,iBAAAC,CAAiB,IAAM,CACnDA,EAAiB,CACnB,CAAC,GAGA,IAAM,CACL,MAAMC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAU,SAAS,eAAe,aAAa,EAC1CA,GAAS,gBAAkBD,GAC3B,iBAAiBA,CAAK,EAAE,WAAa,YACrC,iBAAiBC,CAAO,EAAE,WAAa,YACzC,QAAQ,MAAM,gGAAgG,CACzH,GAAG,EAEH,QAAQ,IAAI,wBAAmBxC,EAAK,OAAO,SAAS,GAGhD,SAAS,WAAa,aAAe,SAAS,WAAa,cAC7D,WAAW,IAAMa,EAAS,EAAG,GAAG,CAEpC,CAAC",
  "names": ["FLAB", "PITCH_LAND", "PITCH_PORT", "PASS_STYLES", "preloadArrowAssets", "ensureHalo", "relayoutAllPlayers", "initDrag", "initPassTool", "setOrientation", "wireUI", "initKeyboard", "loadSettings", "runAudit", "applyPreset", "wirePresetDropdown", "wireEraseMenu", "wirePassStyleMenu", "initPassLayer", "initErrorHandler", "initToastSystem", "initSpinnerSystem", "initTouchGestures", "initBottomSheetSystem", "initAccessibility", "addLandmarks", "addAriaLabels", "addSkipLink", "enableKeyboardNavigation", "initUndoRedo", "saveUndoState", "initTheme", "initShare", "preloadImg1", "preloadImg2", "preloadArrowHeads", "ensureBallLayer", "preloadBall", "ensureLayerOrder", "field", "overlay"]
}
