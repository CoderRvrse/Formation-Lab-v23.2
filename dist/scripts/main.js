import"./version.js";import{FLAB as t,PITCH_LAND as a,PITCH_PORT as l,PASS_STYLES as s}from"./state.js";import{preloadArrowAssets as m}from"./assets.arrows.js";import{ensureHalo as d,relayoutAllPlayers as p}from"./render.js";import{initDrag as c}from"./drag.js";import{initPassTool as w}from"./pass.js";import{setOrientation as f}from"./orientation.js";import{wireUI as y}from"./ui.js";import{initKeyboard as u}from"./keyboard.js";import{loadSettings as g}from"./persist.js";import{runAudit as A}from"./audit.js";import{applyPreset as L}from"./presets.js";import{wirePresetDropdown as h}from"./ui.presets.menu.js";import{wireEraseMenu as I}from"./ui.erase.menu.js";import{wirePassStyleMenu as P}from"./ui.passstyle.menu.js";import{initPassLayer as S}from"./pass.init.js";console.log(`\u{1F680} Formation Lab ${t.version} starting...`),(location.hostname==="127.0.0.1"||location.hostname==="localhost")&&(window.onerror=(r,o,e,i,n)=>(console.warn("[FLAB]",window.FLAB_VERSION,r,`${o}:${e}:${i}`,n),!1),window.addEventListener("unhandledrejection",r=>{console.warn("[FLAB]",window.FLAB_VERSION,"Unhandled Promise rejection:",r.reason)}));const E=new Image,b=new Image;E.src=a,b.src=l,window.addEventListener("DOMContentLoaded",async()=>{console.log("\u{1F4C4} DOM loaded, initializing modules..."),await m(s);const{preloadArrowHeads:r}=await import("./assets.arrows.js");await r(),g(),(!t.players||t.players.length===0)&&L("4-3-3"),d(),f(t.orientation||"landscape"),p(),c(),w(),u(),S(),y(),h(),I(),P(),import("./animate.js").then(({ensureBallLayer:o,preloadBall:e})=>{o(document.getElementById("arrow-layer")),e()}),import("./render.js").then(({ensureLayerOrder:o})=>{o()}),(()=>{const o=document.querySelector(".flab-field"),e=document.getElementById("arrow-layer");e?.parentElement===o&&getComputedStyle(o).position==="relative"&&getComputedStyle(e).position==="absolute"||console.error("Arrow overlay misaligned: place #arrow-layer inside .flab-field with position:absolute;inset:0")})(),console.log(`\u2705 Formation Lab ${t.version} ready!`),(location.hostname==="127.0.0.1"||location.hostname==="localhost")&&setTimeout(()=>A(),500)});
//# sourceMappingURL=main.js.map
