import"./version.js";import{FLAB as r,PITCH_LAND as e,PITCH_PORT as m,PASS_STYLES as n}from"./state.js";import{preloadArrowAssets as a}from"./assets.arrows.js";import{ensureHalo as s,relayoutAllPlayers as l}from"./render.js";import{initDrag as p}from"./drag.js";import{initPassTool as d}from"./pass.js";import{setOrientation as f}from"./orientation.js";import{wireUI as c}from"./ui.js";import{initKeyboard as y}from"./keyboard.js";import{loadSettings as u}from"./persist.js";import{runAudit as w}from"./audit.js";import{applyPreset as g}from"./presets.js";import{wirePresetDropdown as S}from"./ui.presets.menu.js";import{wireEraseMenu as h}from"./ui.erase.menu.js";import{wirePassStyleMenu as A}from"./ui.passstyle.menu.js";import{initPassLayer as L}from"./pass.init.js";import{initErrorHandler as P}from"./error-handler.js";import{initToastSystem as I}from"./ui-toast.js";import{initSpinnerSystem as b}from"./loading-spinner.js";import{initTouchGestures as T}from"./touch-gestures.js";import{initBottomSheetSystem as E}from"./bottom-sheet.js";import{initAccessibility as v,addLandmarks as k,addAriaLabels as C,addSkipLink as D}from"./accessibility.js";import{initUndoRedo as H,saveUndoState as B}from"./undo-redo.js";import{initTheme as F}from"./theme.js";import{initShare as M}from"./share.js";import{initFullscreen as O}from"./fullscreen.js";import{initPlayerEditor as U}from"./player-editor.js";console.log(`\u{1F680} Formation Lab ${r.version} starting...`),P(),I(),b(),E(),v(),F();const _=new Image,R=new Image;_.src=e,R.src=m,window.addEventListener("DOMContentLoaded",async()=>{console.log("\u{1F4C4} DOM loaded, initializing modules..."),await a(n);const{preloadArrowHeads:i}=await import("./assets.arrows.js");await i(),u(),(!r.players||r.players.length===0)&&g("4-3-3"),s(),f(r.orientation||"landscape"),l(),p(),d(),y(),T(),L(),c(),S(),h(),A(),D(),k(),C(),H(),B("Initial formation"),M(),O(),U(),import("./animate.js").then(({ensureBallLayer:o,preloadBall:t})=>{o(document.getElementById("arrow-layer")),t()}),import("./render.js").then(({ensureLayerOrder:o})=>{o()}),(()=>{const o=document.querySelector(".flab-field"),t=document.getElementById("arrow-layer");t?.parentElement===o&&getComputedStyle(o).position==="relative"&&getComputedStyle(t).position==="absolute"||console.error("Arrow overlay misaligned: place #arrow-layer inside .flab-field with position:absolute;inset:0")})(),console.log(`\u2705 Formation Lab ${r.version} ready!`),(location.hostname==="127.0.0.1"||location.hostname==="localhost")&&setTimeout(()=>w(),500)});
//# sourceMappingURL=main.js.map
