{
  "version": 3,
  "sources": ["../../scripts/ui.js"],
  "sourcesContent": ["// UI module for Formation Lab\r\nimport { FLAB, set } from './state.js';\r\nimport { setOrientation, flipSides } from './orientation.js';\r\nimport { exportPNG } from './export.js';\r\nimport { applyPreset, snapshotCurrentPlayersCanonical, applyPlayersCanonical, PRESET_433 } from './presets.js';\r\nimport { saveSettings } from './persist.js';\r\nimport { savePreset, getDefaultPresetName, getPreset, setDefaultPreset, listPresets, deletePreset } from './storage.js';\r\nimport { logPresetSave, logPresetApply, logPresetSetDefault, logPresetDelete, logPresetManagement } from './logger.js';\r\n\r\n// Toast notifications\r\nexport function showToast(message) {\r\n  const toastHost = document.getElementById('toastHost');\r\n  if (!toastHost) {\r\n    console.log(message);\r\n    return;\r\n  }\r\n\r\n  const toast = document.createElement('div');\r\n  toast.className = 'flab-toast';\r\n  toast.textContent = message;\r\n  toast.setAttribute('role', 'status');\r\n  toast.setAttribute('aria-live', 'polite');\r\n\r\n  toastHost.appendChild(toast);\r\n\r\n  // Trigger animation\r\n  requestAnimationFrame(() => {\r\n    toast.classList.add('show');\r\n  });\r\n\r\n  // Auto-remove after 3 seconds\r\n  setTimeout(() => {\r\n    toast.classList.remove('show');\r\n    setTimeout(() => {\r\n      if (toast.parentNode) {\r\n        toast.parentNode.removeChild(toast);\r\n      }\r\n    }, 300);\r\n  }, 3000);\r\n}\r\n\r\n// Mode switching\r\nfunction setMode(mode) {\r\n  const previous = FLAB.mode;\r\n  const clamped = ['select', 'pass', 'erase'].includes(mode) ? mode : 'select';\r\n  set('mode', clamped);\r\n\r\n  // Update button states (both sidepanel and overlay)\r\n  const toolButtons = document.querySelectorAll('.flab-tool[data-mode], .flab-overlay-btn[data-mode]');\r\n  toolButtons.forEach(btn => {\r\n    const pressed = btn.dataset.mode === FLAB.mode;\r\n    btn.setAttribute(\"aria-pressed\", pressed ? \"true\" : \"false\");\r\n  });\r\n\r\n  // Update arrow layer interactivity\r\n  const arrowLayer = document.getElementById('arrow-layer');\r\n  arrowLayer?.classList.toggle(\"is-interactive\", FLAB.mode === \"erase\");\r\n\r\n  if (previous !== FLAB.mode) {\r\n    console.log(`Mode changed from ${previous} to ${FLAB.mode}`);\r\n  }\r\n\r\n  // Cancel any active interactions\r\n  if (FLAB.mode !== \"pass\") {\r\n    FLAB.passArm = null;\r\n    // Clear aim-assist state when leaving pass mode\r\n    import('./aim.js').then(({ resetAimRings, clearAim }) => {\r\n      resetAimRings(FLAB.players);\r\n      clearAim();\r\n    });\r\n  }\r\n\r\n  // Clear drag state\r\n  FLAB.drag = null;\r\n}\r\n\r\n// Formation reset\r\nfunction resetFormation() {\r\n  const name = getDefaultPresetName();\r\n  if (name) {\r\n    const p = getPreset(name);\r\n    if (p) {\r\n      applyPlayersCanonical(p.players);\r\n      logPresetApply(name, p);\r\n      showToast(`Formation reset to ${name}`);\r\n      return;\r\n    }\r\n  }\r\n  applyPlayersCanonical(PRESET_433);\r\n  logPresetApply('4-3-3 (built-in)', { players: PRESET_433 });\r\n  showToast(\"Formation reset to 4-3-3\");\r\n}\r\n\r\n// Preset management helpers\r\nfunction promptName(defaultName = 'My Preset') {\r\n  const s = prompt('Preset name:', defaultName);\r\n  return s && s.trim() ? s.trim() : null;\r\n}\r\n\r\nfunction handleSavePreset() {\r\n  const name = promptName('4-3-3 tuned');\r\n  if (!name) return;\r\n  const snap = snapshotCurrentPlayersCanonical();\r\n  savePreset(name, snap);\r\n  logPresetSave(name, snap);\r\n  // Optionally set as default immediately\r\n  if (confirm(`Set \"${name}\" as default?`)) {\r\n    setDefaultPreset(name);\r\n    logPresetSetDefault(name);\r\n  }\r\n  showToast(`Preset saved: ${name}`);\r\n}\r\n\r\nfunction handleApplyDefault() {\r\n  const name = getDefaultPresetName();\r\n  if (!name) {\r\n    alert('No default preset set yet. Save one first.');\r\n    return;\r\n  }\r\n  const p = getPreset(name);\r\n  if (!p) {\r\n    alert('Default preset missing.');\r\n    return;\r\n  }\r\n  applyPlayersCanonical(p.players);\r\n  logPresetApply(name, p);\r\n  showToast(`Applied preset: ${name}`);\r\n}\r\n\r\n// Preset management now handled by dropdown module\r\n// Legacy function removed in favor of wirePresetDropdown()\r\n\r\n// Help modal\r\nfunction showHelp() {\r\n  const helpOverlay = document.getElementById('helpOverlay');\r\n  const helpButton = document.getElementById('helpButton');\r\n\r\n  if (helpOverlay) {\r\n    helpOverlay.setAttribute(\"aria-hidden\", \"false\");\r\n    helpButton?.setAttribute(\"aria-expanded\", \"true\");\r\n\r\n    // Focus the close button for accessibility\r\n    const closeButton = helpOverlay.querySelector('.flab-help__close');\r\n    closeButton?.focus();\r\n  }\r\n}\r\n\r\nexport function hideHelp() {\r\n  const helpOverlay = document.getElementById('helpOverlay');\r\n  const helpButton = document.getElementById('helpButton');\r\n\r\n  if (helpOverlay) {\r\n    helpOverlay.setAttribute(\"aria-hidden\", \"true\");\r\n    helpButton?.setAttribute(\"aria-expanded\", \"false\");\r\n\r\n    // Return focus to help button\r\n    helpButton?.focus();\r\n  }\r\n}\r\n\r\n\r\n// Acceptance logging\r\nfunction logAcceptanceChecklist() {\r\n  console.group('\u2705 Formation Lab v23.4 Acceptance Checklist');\r\n\r\n  // Module checks\r\n  const modules = ['state', 'geometry', 'drag', 'pass', 'render', 'orientation', 'export', 'ui'];\r\n  modules.forEach(name => {\r\n    const loaded = !!window[`__mod_${name}`];\r\n    console.log(`\uD83D\uDCE6 Module ${name}:`, loaded ? '\u2705 loaded' : '\u274C missing');\r\n  });\r\n\r\n  // Core functionality checks\r\n  console.log('\uD83C\uDFAF Halo-edge origins:', !!document.getElementById('flabHalo') ? '\u2705 halo present' : '\u274C missing');\r\n  console.log('\uD83D\uDDB1\uFE0F  Select/Drag mode:', FLAB.mode === 'select' ? '\u2705 active' : '\u26A0\uFE0F  not active');\r\n  const previewReady = !!document.querySelector('#arrow-layer #pass-preview');\r\n  console.log('\u27A1\uFE0F  Pass tool:', previewReady ? '\u2705 preview ready' : '\u26A0\uFE0F  preview missing');\r\n  console.log('\uD83D\uDD04 Orientation support:', FLAB.orientation ? `\u2705 ${FLAB.orientation}` : '\u274C missing');\r\n  console.log('\uD83D\uDCF1 Service worker:', 'serviceWorker' in navigator ? '\u2705 supported' : '\u274C not supported');\r\n  console.log('\uD83C\uDFF7\uFE0F  Version consistency:', window.FLAB_VERSION === FLAB.version ? '\u2705 matches' : '\u26A0\uFE0F  mismatch');\r\n\r\n  // State validation\r\n  console.assert(!!window.FLAB && !!window.FLAB_VERSION, 'State/version missing');\r\n\r\n  console.groupEnd();\r\n}\r\n\r\n// Wire up all UI interactions\r\nexport function wireUI() {\r\n  // Mode buttons (sidepanel tools, overlay buttons, and undo/redo buttons)\r\n  document.querySelectorAll('.flab-tool[data-mode], .flab-overlay-btn[data-mode], .flab-undo-redo-btn[data-mode]').forEach(btn => {\r\n    btn.addEventListener('click', () => {\r\n      setMode(btn.dataset.mode);\r\n    });\r\n  });\r\n\r\n  // Export button\r\n  const exportButton = document.getElementById('exportButton');\r\n  exportButton?.addEventListener('click', exportPNG);\r\n\r\n  // Reset button\r\n  const resetButton = document.getElementById('resetButton');\r\n  resetButton?.addEventListener('click', resetFormation);\r\n\r\n  // Controls tab button (Tools panel toggle)\r\n  const btnControlsTab = document.getElementById('btnControlsTab');\r\n  const pitchControlsSheet = document.getElementById('pitchControlsSheet');\r\n\r\n  btnControlsTab?.addEventListener('click', (e) => {\r\n    e.stopPropagation();\r\n    const isOpen = pitchControlsSheet?.classList.contains('is-open');\r\n\r\n    if (isOpen) {\r\n      // Close the panel\r\n      pitchControlsSheet.classList.remove('is-open');\r\n      btnControlsTab.setAttribute('aria-expanded', 'false');\r\n    } else {\r\n      // Open the panel\r\n      pitchControlsSheet.classList.add('is-open');\r\n      btnControlsTab.setAttribute('aria-expanded', 'true');\r\n    }\r\n  });\r\n\r\n  // Preset buttons\r\n  const btnSavePreset = document.getElementById('btnSavePreset');\r\n  const btnApplyDefault = document.getElementById('btnApplyDefault');\r\n\r\n  btnSavePreset?.addEventListener('click', handleSavePreset);\r\n  btnApplyDefault?.addEventListener('click', handleApplyDefault);\r\n  // Manage button now handled by preset dropdown module\r\n\r\n  // Orientation buttons\r\n  const btnLandscape = document.getElementById('btnLandscape');\r\n  const btnPortrait = document.getElementById('btnPortrait');\r\n  btnLandscape?.addEventListener('click', () => {\r\n    // On desktop, landscape mode = fullscreen mode for better display\r\n    import('./orientation.js').then(({ autoOrientation }) => {\r\n      // Check if we're on desktop\r\n      const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n      const isSmallScreen = window.screen.width <= 1024 || window.screen.height <= 1024;\r\n      const mobilePattern = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\r\n      const isMobileUA = mobilePattern.test(navigator.userAgent);\r\n      const isMobile = (hasTouch && isSmallScreen) || isMobileUA;\r\n\r\n      if (!isMobile) {\r\n        // Desktop: trigger fullscreen instead\r\n        import('./fullscreen.js').then(({ enterFullscreen }) => {\r\n          enterFullscreen();\r\n        });\r\n      } else {\r\n        // Mobile: just set orientation\r\n        setOrientation('landscape');\r\n        saveSettings({ orientation: 'landscape' });\r\n      }\r\n    });\r\n  });\r\n  btnPortrait?.addEventListener('click', () => {\r\n    setOrientation('portrait');\r\n    saveSettings({ orientation: 'portrait' });\r\n  });\r\n\r\n  // Flip sides button\r\n  const btnFlip = document.getElementById('btnFlip');\r\n  btnFlip?.addEventListener('click', flipSides);\r\n\r\n  // Pass style dropdown now handled by pass style menu module\r\n\r\n  // Aim-assist (read-only from localStorage; no UI control)\r\n  try {\r\n    const saved = localStorage.getItem('flab-aim-assist');\r\n    if (saved !== null) {\r\n      const enabled = JSON.parse(saved);\r\n      import('./state.js').then(({ AIM }) => {\r\n        AIM.enabled = enabled;\r\n      });\r\n    }\r\n  } catch (e) {\r\n    console.warn('Could not load aim-assist setting:', e);\r\n  }\r\n\r\n  // Help modal\r\n  const helpButton = document.getElementById('helpButton');\r\n  const closeHelpButton = document.getElementById('closeHelpButton');\r\n  const helpOverlay = document.getElementById('helpOverlay');\r\n\r\n  helpButton?.addEventListener('click', showHelp);\r\n  closeHelpButton?.addEventListener('click', hideHelp);\r\n\r\n  // Close help when clicking outside\r\n  helpOverlay?.addEventListener('click', (evt) => {\r\n    if (evt.target === helpOverlay) {\r\n      hideHelp();\r\n    }\r\n  });\r\n\r\n\r\n  // Resize handling with debouncing for better performance\r\n  let resizeTimeout;\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimeout);\r\n    resizeTimeout = setTimeout(() => {\r\n      import('./render.js').then(({ handleResize }) => {\r\n        handleResize();\r\n      });\r\n    }, 16); // ~60fps throttling\r\n  });\r\n\r\n  // Undo/Redo buttons\r\n  import('./undo-redo.js').then(({ undoManager }) => {\r\n    const btnUndo = document.getElementById('btnUndo');\r\n    const btnRedo = document.getElementById('btnRedo');\r\n\r\n    if (btnUndo) {\r\n      btnUndo.addEventListener('click', () => {\r\n        undoManager.undo();\r\n      });\r\n    }\r\n\r\n    if (btnRedo) {\r\n      btnRedo.addEventListener('click', () => {\r\n        undoManager.redo();\r\n      });\r\n    }\r\n\r\n    // Keyboard shortcuts\r\n    document.addEventListener('keydown', (e) => {\r\n      // Undo: Ctrl+Z or Cmd+Z\r\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {\r\n        e.preventDefault();\r\n        undoManager.undo();\r\n      }\r\n      // Redo: Ctrl+Y or Cmd+Y or Ctrl+Shift+Z\r\n      if ((e.ctrlKey || e.metaKey) && (e.key === 'y' || (e.key === 'z' && e.shiftKey))) {\r\n        e.preventDefault();\r\n        undoManager.redo();\r\n      }\r\n    });\r\n  });\r\n\r\n  // Close controls sheet when clicking on pitch\r\n  const pitchWrapper = document.querySelector('.flab-pitch-wrapper');\r\n  const pitchField = document.querySelector('.flab-field');\r\n\r\n  pitchWrapper?.addEventListener('click', (e) => {\r\n    // Don't close if clicking on a control button or the sheet itself\r\n    if (e.target.closest('.flab-controls-tab') || e.target.closest('.flab-controls-sheet')) {\r\n      return;\r\n    }\r\n\r\n    // Close the panel if it's open\r\n    const pitchControlsSheet = document.getElementById('pitchControlsSheet');\r\n    const btnControlsTab = document.getElementById('btnControlsTab');\r\n\r\n    if (pitchControlsSheet?.classList.contains('is-open')) {\r\n      pitchControlsSheet.classList.remove('is-open');\r\n      btnControlsTab?.setAttribute('aria-expanded', 'false');\r\n    }\r\n  });\r\n\r\n  // Wire up pass playback controls\r\n  setupPassPlaybackControls();\r\n\r\n  // Log acceptance checklist\r\n  setTimeout(logAcceptanceChecklist, 1000);\r\n\r\n  console.log('\uD83C\uDFAE Formation Lab UI initialized');\r\n}\r\n\r\n// Ball playback diagnostics\r\nfunction showBallPlaybackDiagnostics() {\r\n  const ballLayer = document.getElementById('ball-layer');\r\n  const arrowLayer = document.getElementById('arrow-layer');\r\n  const arrowGroup = document.getElementById('arrow-group');\r\n  const debugLayer = document.getElementById('arrow-debug-layer') || document.getElementById('ball-debug');\r\n\r\n  const ballChildren = ballLayer?.children?.length || 0;\r\n  const debugChildren = debugLayer?.children?.length || 0;\r\n  const arrowChildren = arrowLayer?.children?.length || 0;\r\n  const arrowGroupChildren = arrowGroup?.children?.length || 0;\r\n\r\n  const lastPassPath = document.querySelector('#arrow-group [data-arrow-id] path') ||\r\n                      document.querySelector('#arrow-layer [data-arrow-id] path');\r\n  const lastPassLength = lastPassPath ? lastPassPath.getTotalLength().toFixed(1) + 'px' : 'No paths found';\r\n\r\n  const layerOrder = [];\r\n  if (arrowLayer) {\r\n    Array.from(arrowLayer.children).forEach((child, i) => {\r\n      layerOrder.push(`${i}: ${child.id || child.tagName}`);\r\n    });\r\n  }\r\n\r\n  const arrowGroupOrder = [];\r\n  if (arrowGroup) {\r\n    Array.from(arrowGroup.children).forEach((child, i) => {\r\n      arrowGroupOrder.push(`  ${i}: ${child.id || child.tagName || 'unnamed'}`);\r\n    });\r\n  }\r\n\r\n  const ballParent = ballLayer?.parentNode?.id || 'unknown';\r\n\r\n  const report = `Ball Playback Diagnostics:\r\n\r\n\uD83C\uDFAF Layer Status:\r\n\u2022 Ball layer children: ${ballChildren}\r\n\u2022 Ball layer parent: ${ballParent}\r\n\u2022 Debug layer children: ${debugChildren}\r\n\u2022 Arrow layer children: ${arrowChildren}\r\n\u2022 Arrow group children: ${arrowGroupChildren}\r\n\u2022 Last pass path length: ${lastPassLength}\r\n\r\n\uD83D\uDCD0 SVG Structure:\r\n#arrow-layer children:\r\n${layerOrder.join('\\n')}\r\n\r\n#arrow-group children:\r\n${arrowGroupOrder.join('\\n')}\r\n\r\n\uD83D\uDD27 Asset Status:\r\n\u2022 Ball URL: ${FLAB.assets?.ballUrl || 'Not set'}\r\n\u2022 Ball asset exists: ${!!document.querySelector('[href*=\"Soccer-ball\"]')}\r\n\r\n\uD83D\uDCAD Current State:\r\n\u2022 Pass count: ${FLAB.arrows?.length || 0}\r\n\u2022 Current mode: ${FLAB.mode}\r\n\u2022 Animation playing: ${window.currentAnimController ? 'Yes' : 'No'}`;\r\n\r\n  console.log(report);\r\n  showToast('Diagnostics logged to console \uD83D\uDD0D');\r\n}\r\n\r\n// Pass playback controls\r\nfunction setupPassPlaybackControls() {\r\n  const controls = document.getElementById('passPlaybackControls');\r\n  const btnPlayLast = document.getElementById('btnPlayLast');\r\n  const btnPlayAll = document.getElementById('btnPlayAll');\r\n  const btnStopPlayback = document.getElementById('btnStopPlayback');\r\n  const btnDiagnostics = document.getElementById('btnDiagnostics');\r\n\r\n  if (!controls || !btnPlayLast || !btnPlayAll || !btnStopPlayback) {\r\n    console.warn('Pass playback controls not found');\r\n    return;\r\n  }\r\n\r\n  let currentController = null;\r\n\r\n  // Update control states\r\n  function updateControlStates() {\r\n    import('./pass.js').then(({ getAllPassIds }) => {\r\n      const passIds = getAllPassIds();\r\n      const hasPassses = passIds.length > 0;\r\n\r\n      // Show/hide controls based on whether there are passes\r\n      controls.style.display = hasPassses ? 'flex' : 'none';\r\n\r\n      if (hasPassses) {\r\n        btnPlayLast.disabled = false;\r\n        btnPlayAll.disabled = false;\r\n      } else {\r\n        btnPlayLast.disabled = true;\r\n        btnPlayAll.disabled = true;\r\n      }\r\n    });\r\n\r\n    import('./animate.js').then(({ isPlaying }) => {\r\n      const playing = isPlaying();\r\n      btnStopPlayback.disabled = !playing;\r\n    });\r\n  }\r\n\r\n  // Play last pass\r\n  btnPlayLast.addEventListener('click', async () => {\r\n    try {\r\n      const { playPass } = await import('./animate.js');\r\n\r\n      const lastId = FLAB.lastPassId;\r\n      if (!lastId) {\r\n        showToast('No recent pass to play');\r\n        return;\r\n      }\r\n\r\n      const passData = FLAB.arrows.find(arrow => arrow.id === lastId);\r\n      if (passData) {\r\n        await playPass(passData);\r\n        updateControlStates();\r\n      }\r\n    } catch (e) {\r\n      console.warn('Play last pass failed:', e);\r\n    }\r\n  });\r\n\r\n  // Play all passes\r\n  btnPlayAll.addEventListener('click', async () => {\r\n    try {\r\n      const { getAllPassIds } = await import('./pass.js');\r\n      const { queuePasses } = await import('./animate.js');\r\n\r\n      const allIds = getAllPassIds();\r\n      if (allIds.length > 0) {\r\n        currentController = await queuePasses(allIds);\r\n        updateControlStates();\r\n      }\r\n    } catch (e) {\r\n      console.warn('Play all passes failed:', e);\r\n    }\r\n  });\r\n\r\n  // Stop playback\r\n  btnStopPlayback.addEventListener('click', async () => {\r\n    try {\r\n      const { stopPlayback } = await import('./animate.js');\r\n      stopPlayback('user-request');\r\n      currentController = null;\r\n      updateControlStates();\r\n    } catch (e) {\r\n      console.warn('Stop playback failed:', e);\r\n    }\r\n  });\r\n\r\n  // Diagnostics\r\n  if (btnDiagnostics) {\r\n    btnDiagnostics.addEventListener('click', () => {\r\n      showBallPlaybackDiagnostics();\r\n    });\r\n  }\r\n\r\n  document.querySelectorAll('[data-proxy]').forEach(btn => {\r\n    const targetSelector = btn.getAttribute('data-proxy');\r\n    if (!targetSelector) return;\r\n    btn.addEventListener('click', () => {\r\n      const target = document.querySelector(targetSelector);\r\n      if (target) {\r\n        target.click();\r\n      }\r\n    });\r\n  });\r\n\r\n  // Pass click handling for one-click play\r\n  const arrowLayer = document.getElementById('arrow-layer');\r\n  if (arrowLayer) {\r\n    arrowLayer.addEventListener('click', async (evt) => {\r\n      // Find clicked pass element\r\n      const passElement = evt.target.closest('[data-arrow-id]');\r\n      if (!passElement) return;\r\n\r\n      const passId = passElement.dataset.arrowId;\r\n      if (!passId) return;\r\n\r\n      try {\r\n        // Clear any existing highlights\r\n        const { clearPassHighlight, highlightPass } = await import('./pass.js');\r\n        clearPassHighlight();\r\n\r\n        // Highlight the clicked pass\r\n        highlightPass(passId);\r\n\r\n        // Play the pass\r\n        const { playPass } = await import('./animate.js');\r\n        const passData = FLAB.arrows.find(arrow => arrow.id.toString() === passId.toString());\r\n        if (passData) {\r\n          await playPass(passData);\r\n        }\r\n      } catch (e) {\r\n        console.warn('Pass click play failed:', e);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Listen for pass commits to update controls\r\n  window.addEventListener('flab:pass', () => {\r\n    setTimeout(updateControlStates, 100); // Small delay to ensure DOM is updated\r\n  });\r\n\r\n  // Listen for playback end to update controls\r\n  window.addEventListener('flab:replay-end', () => {\r\n    currentController = null;\r\n    updateControlStates();\r\n  });\r\n\r\n  // Initial state update\r\n  setTimeout(updateControlStates, 500);\r\n}\r\n\r\nwindow.__mod_ui = true;\r\n"],
  "mappings": "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",
  "names": ["FLAB", "set", "setOrientation", "flipSides", "exportPNG", "snapshotCurrentPlayersCanonical", "applyPlayersCanonical", "PRESET_433", "saveSettings", "savePreset", "getDefaultPresetName", "getPreset", "setDefaultPreset", "logPresetSave", "logPresetApply", "logPresetSetDefault", "showToast", "message", "toastHost", "toast", "__name", "setMode", "mode", "previous", "clamped", "btn", "pressed", "resetAimRings", "clearAim", "resetFormation", "name", "p", "promptName", "defaultName", "s", "handleSavePreset", "snap", "handleApplyDefault", "showHelp", "helpOverlay", "helpButton", "hideHelp", "logAcceptanceChecklist", "loaded", "previewReady", "wireUI", "btnControlsTab", "pitchControlsSheet", "e", "btnSavePreset", "btnApplyDefault", "btnLandscape", "btnPortrait", "autoOrientation", "hasTouch", "isSmallScreen", "isMobileUA", "enterFullscreen", "saved", "enabled", "AIM", "closeHelpButton", "evt", "resizeTimeout", "handleResize", "undoManager", "btnUndo", "btnRedo", "pitchWrapper", "pitchField", "setupPassPlaybackControls", "showBallPlaybackDiagnostics", "ballLayer", "arrowLayer", "arrowGroup", "debugLayer", "ballChildren", "debugChildren", "arrowChildren", "arrowGroupChildren", "lastPassPath", "lastPassLength", "layerOrder", "child", "i", "arrowGroupOrder", "ballParent", "report", "controls", "btnPlayLast", "btnPlayAll", "btnStopPlayback", "btnDiagnostics", "currentController", "updateControlStates", "getAllPassIds", "hasPassses", "isPlaying", "playing", "playPass", "lastId", "passData", "arrow", "queuePasses", "allIds", "stopPlayback", "targetSelector", "target", "passElement", "passId", "clearPassHighlight", "highlightPass"]
}
