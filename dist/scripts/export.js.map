{
  "version": 3,
  "sources": ["../../scripts/export.js"],
  "sourcesContent": ["// Export module for Formation Lab\r\nimport { FLAB, PITCH_LAND, PITCH_PORT, PASS } from './state.js';\r\nimport { normToView, getVar, insetFromA, insetFromB } from './geometry.js';\r\nimport { ARROW_ASSETS } from './assets.arrows.js';\r\nimport { headPxFor, headTrimPx } from './pass.headsize.js';\r\nimport { showSpinner, hideSpinner } from './loading-spinner.js';\r\nimport { handleError } from './error-handler.js';\r\nimport { showSuccessToast, showErrorToast } from './ui-toast.js';\r\nconst JERSEY_SIZE = 56;\r\n\r\n// Bleed configuration (moved from geometry to avoid circular dependency)\r\nconst BLEED = {\r\n  landscape: { left: 24, right: 24, top: 24, bottom: 24 },\r\n  portrait:  { left: 24, right: 24, top: 28, bottom: 28 }\r\n};\r\n\r\n// Jersey image for export\r\nconst jerseyImg = new Image();\r\njerseyImg.src = 'assets/jersey.svg';\r\n\r\nfunction getPlayer(playerId) {\r\n  return FLAB.players.find(player => player.id === playerId) || null;\r\n}\r\n\r\nfunction showToast(message) {\r\n  // Import ui module for toast functionality\r\n  import('./ui.js').then(({ showToast }) => {\r\n    showToast(message);\r\n  }).catch(() => {\r\n    console.log(message); // Fallback\r\n  });\r\n}\r\n\r\nfunction logTelemetry(event, data) {\r\n  console.log(`Telemetry: ${event}`, data);\r\n}\r\n\r\nfunction applyCanvasPassStyle(ctx) {\r\n  const s = FLAB.passStyle;\r\n  ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--pass-color').trim() || \"#f0c419\";\r\n\r\n  if (s === 'dashed') {\r\n    ctx.setLineDash([14, 10]);\r\n    ctx.lineWidth = 4;\r\n  } else if (s.startsWith('comic')) {\r\n    ctx.setLineDash([2, 8]);\r\n    ctx.lineWidth = 5;\r\n  } else {\r\n    ctx.setLineDash([]);\r\n    ctx.lineWidth = 4;\r\n  }\r\n}\r\n\r\nfunction clamp(v, min, max) {\r\n  return Math.max(min, Math.min(max, v));\r\n}\r\n\r\n// Recolor SVG content with current pass colors\r\nfunction recolorSVG(svgText, fillColor, strokeColor) {\r\n  return svgText\r\n    .replace(/fill\\s*=\\s*[\"'][^\"']*[\"']/gi, `fill=\"${fillColor}\"`)\r\n    .replace(/stroke\\s*=\\s*[\"'][^\"']*[\"']/gi, `stroke=\"${strokeColor}\"`);\r\n}\r\n\r\n// Create a colored image for the current colors\r\nasync function getColoredImage(styleKey, fillColor, strokeColor) {\r\n  const asset = ARROW_ASSETS.get(styleKey);\r\n  if (!asset) return null;\r\n\r\n  const coloredSVG = recolorSVG(asset.svgText, fillColor, strokeColor);\r\n  const img = new Image();\r\n  img.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(coloredSVG);\r\n  await img.decode().catch(() => {});\r\n  return img;\r\n}\r\n\r\nfunction drawHeadCanvas(ctx, A, B, styleKey) {\r\n  const len = Math.hypot(B.x - A.x, B.y - A.y);\r\n  const isComic = /comic/.test(styleKey);\r\n  const head = headPxFor(len, isComic);\r\n\r\n  const ang = Math.atan2(B.y - A.y, B.x - A.x);\r\n\r\n  // Get current colors for a simple geometric arrow\r\n  const shaftColor = getComputedStyle(document.documentElement).getPropertyValue('--pass-color')?.trim() || PASS.color;\r\n  const outlineColor = getComputedStyle(document.documentElement).getPropertyValue('--pass-outline')?.trim() || PASS.outline;\r\n\r\n  ctx.save();\r\n  ctx.translate(B.x, B.y);\r\n  ctx.rotate(ang);\r\n\r\n  // Draw a simple triangle arrow head using current colors\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.lineTo(-head, head / 2);\r\n  ctx.lineTo(-head, -head / 2);\r\n  ctx.closePath();\r\n\r\n  ctx.fillStyle = shaftColor;\r\n  ctx.fill();\r\n\r\n  ctx.lineWidth = getVar('--pass-head-outline', 1.4);\r\n  ctx.strokeStyle = outlineColor;\r\n  ctx.stroke();\r\n\r\n  ctx.restore();\r\n}\r\n\r\nasync function ensureJerseyReady() {\r\n  if (jerseyImg.complete) {\r\n    if (jerseyImg.naturalWidth > 0) {\r\n      return;\r\n    }\r\n    throw new Error('jersey_unavailable');\r\n  }\r\n  if (typeof jerseyImg.decode === \"function\") {\r\n    try {\r\n      await jerseyImg.decode();\r\n      if (jerseyImg.naturalWidth > 0) {\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      console.warn('jersey_decode_failed', error);\r\n    }\r\n  }\r\n  await new Promise((resolve, reject) => {\r\n    jerseyImg.addEventListener('load', resolve, { once: true });\r\n    jerseyImg.addEventListener('error', () => reject(new Error('Failed to load jersey.svg')), { once: true });\r\n  });\r\n  if (jerseyImg.naturalWidth === 0) {\r\n    throw new Error('jersey_unavailable');\r\n  }\r\n}\r\n\r\nfunction drawJersey(ctx, x, y, size, numText) {\r\n  const half = size / 2;\r\n  const scale = size / JERSEY_SIZE || 1;\r\n  if (jerseyImg.complete && jerseyImg.naturalWidth > 0) {\r\n    ctx.drawImage(jerseyImg, x - half, y - half, size, size);\r\n  } else {\r\n    ctx.save();\r\n    ctx.fillStyle = '#0b2b72';\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, half, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  const chipRadius = 14 * scale;\r\n  const offset = 4 * scale;\r\n  const chipX = x + half - chipRadius - offset;\r\n  const chipY = y + half - chipRadius - offset;\r\n\r\n  ctx.save();\r\n  ctx.fillStyle = '#ffd166';\r\n  ctx.strokeStyle = 'rgba(0, 0, 0, 0.12)';\r\n  ctx.lineWidth = Math.max(1, 2 * scale);\r\n  ctx.beginPath();\r\n  ctx.arc(chipX, chipY, chipRadius, 0, Math.PI * 2);\r\n  ctx.fill();\r\n  ctx.stroke();\r\n  ctx.fillStyle = '#0b2b66';\r\n  ctx.font = `${Math.max(12, 14 * scale)}px \"Segoe UI\", Arial, sans-serif`;\r\n  ctx.textAlign = 'center';\r\n  ctx.textBaseline = 'middle';\r\n  ctx.fillText(String(numText), chipX, chipY);\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawArrows(ctx, width, height) {\r\n  ctx.save();\r\n  const passColor = getComputedStyle(document.documentElement).getPropertyValue('--pass-color').trim() || \"#f0c419\";\r\n  ctx.strokeStyle = passColor;\r\n  ctx.fillStyle = passColor;\r\n  applyCanvasPassStyle(ctx);\r\n  ctx.lineCap = \"round\";\r\n\r\n  const avgScale = Math.min(width / 800, height / 600);\r\n\r\n  FLAB.arrows.forEach(arrow => {\r\n    const fromPlayer = getPlayer(arrow.fromId);\r\n    if (!fromPlayer) return;\r\n\r\n    // Use view-aware coordinates for export\r\n    const isExportPortrait = FLAB.orientation === 'portrait';\r\n    const bleed = isExportPortrait ? BLEED.portrait : BLEED.landscape;\r\n    const r = {\r\n      x: bleed.left * (width / 720),\r\n      y: bleed.top * (height / 460),\r\n      w: width - (bleed.left + bleed.right) * (width / 720),\r\n      h: height - (bleed.top + bleed.bottom) * (height / 460)\r\n    };\r\n\r\n    // Apply view transform for export\r\n    const {vx: passerVx, vy: passerVy} = normToView(fromPlayer.nx, fromPlayer.ny);\r\n    const passerCenter = {\r\n      x: r.x + passerVx * r.w,\r\n      y: r.y + passerVy * r.h\r\n    };\r\n\r\n    // Target center needs scaling from original arrow coordinates\r\n    const scaleX = width / (document.querySelector('.flab-field')?.clientWidth || 800);\r\n    const scaleY = height / (document.querySelector('.flab-field')?.clientHeight || 600);\r\n    const targetCenter = { x: arrow.to.x * scaleX, y: arrow.to.y * scaleY };\r\n\r\n    // Create a scaled version of halo-based endpoints for export\r\n    const exportHaloR = 28 * avgScale; // approximate halo radius scaled\r\n    const exportStartGap = getVar('--pass-origin-gap', 1.5) * avgScale;\r\n    const exportEndGap = getVar('--pass-target-gap', 2) * avgScale;\r\n\r\n    // Calculate scaled tight endpoints\r\n    const A = insetFromA(passerCenter.x, passerCenter.y, targetCenter.x, targetCenter.y, exportHaloR + exportStartGap);\r\n    const exportTargetR = 28 * avgScale; // approximate target radius\r\n    const Btip = insetFromB(passerCenter.x, passerCenter.y, targetCenter.x, targetCenter.y, exportTargetR + exportEndGap);\r\n\r\n    // Calculate shaft trim for clean head join\r\n    const len = Math.hypot(Btip.x - A.x, Btip.y - A.y);\r\n    const isComic = /comic/.test(FLAB.passStyle);\r\n    const headPx = headPxFor(len, isComic);\r\n    const trim = headTrimPx(headPx);\r\n\r\n    // Calculate shortened shaft endpoint\r\n    const dx = Btip.x - A.x;\r\n    const dy = Btip.y - A.y;\r\n    const L = len || 1;\r\n    const Bshaft = {\r\n      x: Btip.x - dx * (trim / L),\r\n      y: Btip.y - dy * (trim / L)\r\n    };\r\n\r\n    if (arrow.curved && arrow.control) {\r\n      // For curved passes - need to adjust the curve endpoint\r\n      const scaledControl = { x: arrow.control.x * scaleX, y: arrow.control.y * scaleY };\r\n      ctx.beginPath();\r\n      ctx.moveTo(A.x, A.y);\r\n      ctx.quadraticCurveTo(scaledControl.x, scaledControl.y, Bshaft.x, Bshaft.y);\r\n    } else {\r\n      // For straight passes\r\n      ctx.beginPath();\r\n      ctx.moveTo(A.x, A.y);\r\n      ctx.lineTo(Bshaft.x, Bshaft.y);\r\n    }\r\n\r\n    ctx.stroke();\r\n\r\n    // Draw arrowhead using current style at the tip position\r\n    drawHeadCanvas(ctx, A, Btip, FLAB.passStyle);\r\n  });\r\n\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawPlayers(ctx, width, height) {\r\n  const sizeScale = Math.min(width / 720, height / 460); // Approximate scaling\r\n  FLAB.players.forEach(player => {\r\n    // Use view-aware coordinates and convert to export canvas space\r\n    const isExportPortrait = FLAB.orientation === 'portrait';\r\n    const bleed = isExportPortrait ? BLEED.portrait : BLEED.landscape;\r\n    const r = {\r\n      x: bleed.left * (width / 720),\r\n      y: bleed.top * (height / 460),\r\n      w: width - (bleed.left + bleed.right) * (width / 720),\r\n      h: height - (bleed.top + bleed.bottom) * (height / 460)\r\n    };\r\n\r\n    // Apply view transform for export\r\n    const {vx, vy} = normToView(player.nx, player.ny);\r\n    const x = r.x + vx * r.w;\r\n    const y = r.y + vy * r.h;\r\n    drawJersey(ctx, x, y, JERSEY_SIZE * sizeScale, player.id);\r\n  });\r\n}\r\n\r\nexport async function exportPNG() {\r\n  const spinnerId = showSpinner(\"Exporting formation...\");\r\n\r\n  try {\r\n    const field = document.querySelector('.flab-field');\r\n    const dpr = window.devicePixelRatio || 1;\r\n    const wCss = Math.max(1, field?.clientWidth || 800);\r\n    const hCss = Math.max(1, field?.clientHeight || 600);\r\n\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = Math.round(wCss * dpr);\r\n    canvas.height = Math.round(hCss * dpr);\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    if (!ctx) {\r\n      throw new Error('Canvas context unavailable for export');\r\n    }\r\n\r\n    ctx.scale(dpr, dpr);\r\n\r\n    // Try to load jersey image (non-critical)\r\n    try {\r\n      await ensureJerseyReady();\r\n    } catch (error) {\r\n      console.warn('Jersey image load failed (non-critical):', error);\r\n    }\r\n\r\n    // 1) Draw pitch from active orientation\r\n    const pitchSrc = FLAB.orientation === 'portrait' ? PITCH_PORT : PITCH_LAND;\r\n    const img = new Image();\r\n    img.src = pitchSrc;\r\n\r\n    try {\r\n      await img.decode();\r\n    } catch (error) {\r\n      throw new Error('Failed to load pitch image. Please try again.');\r\n    }\r\n\r\n    ctx.drawImage(img, 0, 0, wCss, hCss);\r\n\r\n    // 2) Draw arrows/jerseys/halo-based passes\r\n    drawArrows(ctx, wCss, hCss);\r\n    drawPlayers(ctx, wCss, hCss);\r\n\r\n    // Add subtle watermark\r\n    ctx.save();\r\n    ctx.font = '12px \"Segoe UI\", Arial, sans-serif';\r\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n    ctx.textAlign = 'right';\r\n    ctx.fillText(`Formation Lab ${FLAB.version}`, wCss - 10, hCss - 10);\r\n    ctx.restore();\r\n\r\n    // 3) Convert to data URL and download\r\n    let url;\r\n    try {\r\n      url = canvas.toDataURL('image/png');\r\n    } catch (error) {\r\n      throw new Error('Failed to create image data. Canvas may be too large.');\r\n    }\r\n\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `formation-${Date.now()}.png`;\r\n    a.click();\r\n\r\n    // Success!\r\n    hideSpinner(spinnerId);\r\n    showSuccessToast(\"Formation exported successfully!\");\r\n\r\n    logTelemetry(\"export_png\", {\r\n      width: canvas.width,\r\n      height: canvas.height,\r\n      arrows: FLAB.arrows.length,\r\n      dpr,\r\n      success: true\r\n    });\r\n\r\n  } catch (error) {\r\n    hideSpinner(spinnerId);\r\n    handleError(error, 'export', true);\r\n    showErrorToast('Export failed. Please try again.');\r\n\r\n    logTelemetry(\"export_png\", {\r\n      error: error.message,\r\n      success: false\r\n    });\r\n  }\r\n}\r\n\r\nwindow.__mod_export = true;"],
  "mappings": "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",
  "names": ["FLAB", "PITCH_LAND", "PITCH_PORT", "PASS", "normToView", "getVar", "insetFromA", "insetFromB", "ARROW_ASSETS", "headPxFor", "headTrimPx", "showSpinner", "hideSpinner", "handleError", "showSuccessToast", "showErrorToast", "JERSEY_SIZE", "BLEED", "jerseyImg", "getPlayer", "playerId", "player", "__name", "showToast", "message", "logTelemetry", "event", "data", "applyCanvasPassStyle", "ctx", "s", "clamp", "v", "min", "max", "recolorSVG", "svgText", "fillColor", "strokeColor", "getColoredImage", "styleKey", "asset", "coloredSVG", "img", "drawHeadCanvas", "A", "B", "len", "isComic", "head", "ang", "shaftColor", "outlineColor", "ensureJerseyReady", "error", "resolve", "reject", "drawJersey", "x", "y", "size", "numText", "half", "scale", "chipRadius", "offset", "chipX", "chipY", "drawArrows", "width", "height", "passColor", "avgScale", "arrow", "fromPlayer", "bleed", "r", "passerVx", "passerVy", "passerCenter", "scaleX", "scaleY", "targetCenter", "exportHaloR", "exportStartGap", "exportEndGap", "exportTargetR", "Btip", "headPx", "trim", "dx", "dy", "L", "Bshaft", "scaledControl", "drawPlayers", "sizeScale", "vx", "vy", "exportPNG", "spinnerId", "field", "dpr", "wCss", "hCss", "canvas", "pitchSrc", "url", "a"]
}
