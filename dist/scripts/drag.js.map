{
  "version": 3,
  "sources": ["../../scripts/drag.js"],
  "sourcesContent": ["// Drag module for Formation Lab\nimport { FLAB } from './state.js';\nimport { n2p_view, p2n_view, clampPx, toView } from './geometry.js';\nimport { beginPassPreview, updatePassPreview, commitPass } from './pass.js';\n\nconst SLOP_PX = 6;\nconst ROLE_LABELS = {\n  GK: \"goalkeeper\",\n  DF: \"defender\",\n  MF: \"midfielder\",\n  FW: \"forward\"\n};\n\nlet playerEls = new Map();\nlet field = null;\nlet _stream = null; // active pointer stream\n\nfunction getLocalPoint(evt, container) {\n  const rect = container.getBoundingClientRect();\n  return {\n    x: evt.clientX - rect.left,\n    y: evt.clientY - rect.top\n  };\n}\n\nfunction getPlayer(playerId) {\n  return FLAB.players.find(player => player.id === playerId) || null;\n}\n\nfunction hitPlayer(evt) {\n  const playerEl = evt.target.closest('.player[data-id]');\n  if (!playerEl) return null;\n  return { id: parseInt(playerEl.dataset.id) };\n}\n\nfunction startPointerStream(ev) {\n  // anchor listeners at window so we never miss moves\n  if (_stream) return;\n  _stream = {\n    id: ev.pointerId,\n    move: e => {\n      if (!FLAB.passArm?.drawing) return;\n      const v = toView(e.clientX, e.clientY);\n      updatePassPreview(v);\n    },\n    up: e => {\n      if (!_stream || e.pointerId !== _stream.id) return;\n      window.removeEventListener('pointermove', _stream.move, true);\n      window.removeEventListener('pointerup', _stream.up, true);\n      window.removeEventListener('pointercancel', _stream.up, true);\n      try { document.getElementById('pitchMount')?.releasePointerCapture(_stream.id); } catch {}\n      _stream = null;\n      if (FLAB.passArm?.drawing) commitPass();\n    }\n  };\n  window.addEventListener('pointermove', _stream.move, true);\n  window.addEventListener('pointerup', _stream.up, true);\n  window.addEventListener('pointercancel', _stream.up, true);\n  // capture on the stable container (not the tiny child)\n  try { document.getElementById('pitchMount')?.setPointerCapture(ev.pointerId); } catch {}\n}\n\nfunction selectPlayer(playerId) {\n  const previous = FLAB.selectedId;\n  if (playerId === FLAB.selectedId) {\n    FLAB.selectedId = null;\n  } else {\n    FLAB.selectedId = playerId ?? null;\n  }\n\n  // Import and call updateHalo when needed\n  if (previous !== FLAB.selectedId) {\n    import('./render.js').then(({ updateHalo }) => {\n      updateHalo();\n    });\n  }\n}\n\nfunction removeArrowsByPlayer(playerId) {\n  const before = FLAB.arrows.length;\n  FLAB.arrows = FLAB.arrows.filter(arrow => arrow.fromId !== playerId);\n  if (before !== FLAB.arrows.length) {\n    import('./render.js').then(({ renderArrows }) => {\n      renderArrows();\n    });\n  }\n}\n\nfunction createPlayerElement(player) {\n  const el = document.createElement(\"div\");\n  el.className = \"flab-player player\";\n  el.dataset.id = String(player.id);\n  el.dataset.role = player.role;\n  el.tabIndex = 0;\n  el.setAttribute(\"role\", \"button\");\n  el.setAttribute(\"aria-label\", `Player ${player.id}, ${ROLE_LABELS[player.role]}`);\n  el.innerHTML = `\n    <img class=\"jersey\" src=\"assets/jersey.svg\" alt=\"\" draggable=\"false\" />\n    <span class=\"num\">${player.id}</span>\n  `;\n\n  el.addEventListener(\"pointerdown\", onPointerDown);\n  el.addEventListener(\"pointermove\", evt => onPlayerPointerMove(evt, player.id));\n  el.addEventListener(\"pointerup\", evt => onPlayerPointerUp(evt, player.id));\n  el.addEventListener(\"pointercancel\", evt => onPlayerPointerUp(evt, player.id));\n\n  el.addEventListener(\"keydown\", evt => onPlayerKeyDown(evt, player.id));\n\n  return el;\n}\n\nexport function onPointerDown(evt) {\n  // stop bubbling through jersey/img/badge layers\n  evt.stopPropagation();\n  evt.preventDefault();\n\n  const hit = hitPlayer(evt);\n  if (!hit) return;\n\n  if (FLAB.mode === 'pass') {\n    if (FLAB.passArm?.drawing) return;   // guard: prevent duplicate begins\n    console.log('[pass] begin from player', hit.id);\n    FLAB.activePlayer = getPlayer(hit.id);\n    beginPassPreview(FLAB.activePlayer);\n    startPointerStream(evt);\n    return;\n  }\n\n  // \u2026 existing select/drag logic\n  const el = playerEls.get(hit.id);\n  const player = getPlayer(hit.id);\n  if (!el || !player) return;\n\n  if (FLAB.mode === \"erase\") {\n    removeArrowsByPlayer(hit.id);\n    return;\n  }\n\n  // Add pressing class to kill hover transitions immediately\n  field.classList.remove(\"can-hover\");\n  field.classList.add(\"lab-pressing\", \"is-engaged\");\n\n  const localPoint = getLocalPoint(evt, field);\n  const { x: centerX, y: centerY } = n2p_view(player.nx, player.ny);\n  const center = { x: centerX, y: centerY };\n\n  selectPlayer(hit.id);\n\n  evt.preventDefault();\n  el.setPointerCapture(evt.pointerId);\n  el.classList.add(\"is-grabbing\");\n  // Add will-change for better performance during drag\n  el.style.willChange = 'transform';\n  FLAB.drag = {\n    pointerId: evt.pointerId,\n    playerId: hit.id,\n    origin: localPoint,\n    grabDX: center.x - localPoint.x,\n    grabDY: center.y - localPoint.y,\n    started: false\n  };\n}\n\nfunction onPlayerPointerMove(evt, playerId) {\n  if (FLAB.passArm && FLAB.passArm.fromId === playerId && FLAB.passArm.pointerId === evt.pointerId) {\n    const v = toView(evt.clientX, evt.clientY);\n    FLAB.passArm.latest = v;\n\n    // Check for curve mode with Alt key\n    FLAB.passArm.curved = evt.altKey;\n    if (FLAB.passArm.curved) {\n      // Add perpendicular offset for curved passes\n      const dx = v.x - FLAB.passArm.origin.x;\n      const dy = v.y - FLAB.passArm.origin.y;\n      const midX = FLAB.passArm.origin.x + dx * 0.5;\n      const midY = FLAB.passArm.origin.y + dy * 0.5;\n      const perpX = -dy * 0.3; // perpendicular offset\n      const perpY = dx * 0.3;\n      FLAB.passArm.control = {\n        x: midX + perpX,\n        y: midY + perpY\n      };\n    } else {\n      FLAB.passArm.control = null;\n    }\n\n    // Import and call pass preview\n    import('./pass.js').then(({ updatePassPreview }) => {\n      updatePassPreview(v);\n    });\n    return;\n  }\n\n  if (!FLAB.drag || FLAB.drag.playerId !== playerId || FLAB.drag.pointerId !== evt.pointerId) {\n    return;\n  }\n\n  const localPoint = getLocalPoint(evt, field);\n  const player = getPlayer(playerId);\n  if (!player) return;\n\n  const dx = localPoint.x - FLAB.drag.origin.x;\n  const dy = localPoint.y - FLAB.drag.origin.y;\n  const distance = Math.hypot(dx, dy);\n\n  if (!FLAB.drag.started && distance < SLOP_PX) {\n    return;\n  }\n\n  evt.preventDefault();\n\n  if (!FLAB.drag.started) {\n    FLAB.drag.started = true;\n    field.classList.add(\"is-engaged\");\n  }\n\n  // Calculate new position in px space\n  let nxPx = localPoint.x + FLAB.drag.grabDX;\n  let nyPx = localPoint.y + FLAB.drag.grabDY;\n\n  // Clamp to playable rect\n  ({ x: nxPx, y: nyPx } = clampPx(nxPx, nyPx));\n\n  // Compute canonical norm from current view\n  const canon = p2n_view(nxPx, nyPx);\n  player.nx = Math.min(1, Math.max(0, canon.nx));\n  player.ny = Math.min(1, Math.max(0, canon.ny));\n\n  // Re-place via view mapping (keeps pixel under cursor)\n  const px = n2p_view(player.nx, player.ny);\n  const el = playerEls.get(playerId);\n  if (el) {\n    el.style.left = `${px.x}px`;\n    el.style.top = `${px.y}px`;\n  }\n\n  // Import and call render functions\n  import('./render.js').then(({ updateHalo, renderArrows }) => {\n    updateHalo();\n    renderArrows();\n  });\n}\n\nfunction onPlayerPointerUp(evt, playerId) {\n  const el = playerEls.get(playerId);\n\n  if (FLAB.passArm && FLAB.passArm.fromId === playerId && FLAB.passArm.pointerId === evt.pointerId) {\n    evt.preventDefault();\n    el?.classList.remove(\"is-grabbing\");\n    if (el) el.style.willChange = 'auto'; // Reset will-change after drag\n    if (el?.hasPointerCapture?.(evt.pointerId)) {\n      el.releasePointerCapture(evt.pointerId);\n    }\n\n    if (FLAB.passArm?.drawing) {\n      console.log('[pass] commit');\n      // Use commitPass which handles passArm cleanup\n      import('./pass.js').then(({ commitPass }) => {\n        commitPass();\n      });\n    } else {\n      FLAB.passArm = null;\n    }\n\n    // Hide preview\n    import('./pass.js').then(({ updatePassPreview }) => {\n      updatePassPreview(null, null);\n    });\n\n    field.classList.remove(\"lab-pressing\", \"is-engaged\");\n    field.classList.add(\"can-hover\");\n    return;\n  }\n\n  if (!FLAB.drag || FLAB.drag.playerId !== playerId || FLAB.drag.pointerId !== evt.pointerId) {\n    return;\n  }\n\n  evt.preventDefault();\n  el?.classList.remove(\"is-grabbing\");\n  if (el) el.style.willChange = 'auto'; // Reset will-change after drag\n\n  if (FLAB.drag.started) {\n    if (el?.hasPointerCapture?.(evt.pointerId)) {\n      el.releasePointerCapture(evt.pointerId);\n    }\n  }\n\n  field.classList.remove(\"lab-pressing\", \"is-engaged\");\n  field.classList.add(\"can-hover\");\n\n  FLAB.drag = null;\n}\n\nfunction onPlayerKeyDown(evt, playerId) {\n  if (evt.key === \"Enter\" || evt.key === \" \") {\n    evt.preventDefault();\n    selectPlayer(playerId);\n  }\n}\n\nexport function initDrag() {\n  field = document.querySelector('.flab-field');\n  if (!field) {\n    console.error('Cannot initialize drag: .flab-field not found');\n    return;\n  }\n\n  // Get player container\n  const playersLayer = document.querySelector('.flab-players');\n  if (!playersLayer) {\n    console.error('Cannot initialize drag: .flab-players not found');\n    return;\n  }\n\n  // Clear existing players and rebuild\n  playersLayer.innerHTML = \"\";\n  playerEls.clear();\n\n  FLAB.players.forEach(player => {\n    const el = createPlayerElement(player);\n    playersLayer.appendChild(el);\n    playerEls.set(player.id, el);\n  });\n\n  // Import and call render functions\n  import('./render.js').then(({ renderPlayers, renderArrows, updateHalo }) => {\n    renderPlayers();\n    renderArrows();\n    updateHalo();\n  });\n\n  field.classList.add(\"can-hover\");\n}\n\nexport { playerEls };\n\nwindow.__mod_drag = true;"],
  "mappings": "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",
  "names": ["FLAB", "n2p_view", "p2n_view", "clampPx", "toView", "beginPassPreview", "updatePassPreview", "commitPass", "SLOP_PX", "ROLE_LABELS", "playerEls", "field", "_stream", "getLocalPoint", "evt", "container", "rect", "__name", "getPlayer", "playerId", "player", "hitPlayer", "playerEl", "startPointerStream", "ev", "e", "v", "selectPlayer", "previous", "updateHalo", "removeArrowsByPlayer", "before", "arrow", "renderArrows", "createPlayerElement", "el", "onPointerDown", "onPlayerPointerMove", "onPlayerPointerUp", "onPlayerKeyDown", "hit", "localPoint", "centerX", "centerY", "center", "dx", "dy", "midX", "midY", "perpX", "perpY", "distance", "nxPx", "nyPx", "canon", "px", "initDrag", "playersLayer", "renderPlayers"]
}
